---
title: 可用於Adobe Commerce的安全性更新 — [!DNL APSB24-40]
promoted: true
description: 套用Hotfix和修補程式，針對Adobe Commerce 2.4.4-p8、2.4.5-p7、2.4.6-p5、2.4.7和更早版本修正 [!DNL CVE-2024-34102] 。
feature: Compliance, Security
role: Developer
exl-id: b6f4a26f-a6cf-4ced-841e-a579c8e0f8f4
source-git-commit: 8531df62a5e1fcb7f2cadbd918016f1691a8017f
workflow-type: tm+mt
source-wordcount: '803'
ht-degree: 0%

---

# 可用於Adobe Commerce的安全性更新 — [!DNL APSB24-40]

>[!NOTE]
>
>**這是與[!DNL CVE-2024-34102]相關的緊急更新。 Adobe知道在針對Adobe Commerce商戶的非常有限的攻擊中，[!DNL CVE-2024-34102]已被惡意利用。

除了2024年6月11日的安全性更新發行和/或2024年6月28日發行的獨立修補程式之外，我們在2024年7月17日發行了[!DNL hotfix]。

**請檢查所有生產和非生產環境，以協助確保您的商店在所有執行個體上皆已完整修正。  請立即執行<u>動作</u>以解決漏洞。**

>[!NOTE]
>
>**僅適用於Adobe Commerce on Cloud商家**：<br><br>1。 請確定您使用最新版本的[!DNL ECE Tools]。 如果您尚未升級，請升級（或跳至專案2）。 若要檢查您現有的版本，請執行此命令：`composer show magento/ece-tools`<br>2。 如果您已經使用最新版的[!DNL ECE Tools]，請檢查`op-exclude.txt`檔案是否存在。 若要這麼做，請執行此命令： `ls op-exclude.txt`。如果此檔案不存在，請新增https://github.com/magento/magento-cloud/blob/master/op-exclude.txt至您的存放庫，然後確認變更並重新部署。<br>3。 不必升級[!DNL ECE Tools]，您也可以在存放庫中新增/修改https://github.com/magento/magento-cloud/blob/master/op-exclude.txt，然後確認變更並重新部署。

## 選項1 — 針對擁有<u>not</u>的商家，自2024年6月11日起已套用安全性更新，或自2024年6月28日起發行的獨立修補程式

1. 套用2024年7月17日發行的[!DNL hotfix]。
1. 套用安全性修補程式。
1. 啟用[!UICONTROL maintenance mode]。
1. 停用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:disable`)。
1. [旋轉您的[!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)。
1. 排清快取。
1. 啟用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:enable`)。
1. 停用[!UICONTROL maintenance mode]。

或

1. 套用隔離的修補程式。 **<u>注意</u>：此版本的隔離修補程式包含2024年7月17日的[!DNL hotfix]。**
1. 啟用[!UICONTROL maintenance mode]。
1. 停用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:disable`)。
1. [旋轉您的[!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)。
1. 排清快取。
1. 啟用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:enable`)。
1. 停用[!UICONTROL maintenance mode]。

## 選項2 — 適用於已<u>從2024年6月11日起套用安全性更新和/或2024年6月28日發行的獨立修補程式的商家</u>

1. 套用2024年7月17日發行的[!DNL hotfix]。
1. 啟用[!UICONTROL maintenance mode]。
1. 停用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:disable`)。
1. [旋轉您的[!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)。
1. 排清快取。
1. 啟用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:enable`)。
1. 停用[!UICONTROL maintenance mode]。

## 選項3 — 適用於已<u>從2024年6月11日起</u> (1)套用安全性更新的商家，及/或(2)2024年6月28日發行的隔離修補程式，及(3)旋轉您的加密金鑰

* 套用2024年7月17日發行的[Hotfix](#hotfix)。


>[!NOTE]
>
>為了確保升級後您仍然安全，您也必須&#x200B;**[旋轉您的[!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)**：<br><br>1。 啟用[!UICONTROL maintenance mode]。<br>2。 停用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:disable`)。<br>3。 旋轉您的[!DNL encryption keys]。<br>4。 啟用[!DNL cron]執行(雲端命令上的Commerce： `vendor/bin/ece-tools cron:enable`)。<br>5。 停用[!UICONTROL maintenance mode]。

在本文章中，您將瞭解如何針對目前和舊版Adobe Commerce和Magento Open Source實施此問題的獨立修補程式。
**<u>注意</u>：此版本的隔離修補程式包含2024年7月17日的[!DNL hotfix]。**

## 受影響的產品和版本

雲端上的Adobe Commerce、內部部署的Adobe Commerce和Magento Open Source：

* 2.4.7-p1和更舊版本
* 2.4.6-p6和較舊版本
* 2.4.5-p8和更舊版本
* 2.4.4-p9及舊版

## 適用於Adobe Commerce on Cloud、Adobe Commerce內部部署軟體和Magento Open Source的解決方案

若要協助解決受影響產品和版本的弱點，您必須套用[!DNL VULN-27015]修補程式（視您的版本而定）並輪換[!UICONTROL encryption keys]。

## Hotfix詳細資料 {#hotfix}

* 下載[!DNL Hotfix] [AC-12485_Hotfix_COMPOSER_patch.zip](assets/AC-12485_Hotfix_COMPOSER_patch.zip)

## 隔離的修正程式詳細資訊

**<u>注意</u>：此版本的隔離修補程式包含2024年7月17日的[!DNL hotfix]。**

根據您的Adobe Commerce/Magento Open Source版本，使用以下附加修補程式：

### 若為2.4.7版：

* [VULN-27015-2.4.7x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.7x_v2_COMPOSER_patch.zip)

### 若為版本2.4.6、2.4.6-p1、2.4.6-p2、2.4.6-p3、2.4.6-p4、2.4.6-p5：

* [VULN-27015-2.4.6x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.6x_v2_COMPOSER_patch.zip)

### 若為版本2.4.5、2.4.5-p1、2.4.5-p2、2.4.5-p3、2.4.5-p4、2.4.5-p5、2.4.5-p6、2.4.5-p7：

* [VULN-27015-2.4.5x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.5x_v2_COMPOSER_patch.zip)

### 若為版本2.4.4、2.4.4-p1、2.4.4-p2、2.4.4-p3、2.4.4-p4、2.4.4-p5、2.4.4-p6、2.4.4-p7、2.4.4-p8：

* [VULN-27015-2.4.4x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.4x_v2_COMPOSER_patch.zip)


## 如何套用隔離的修補程式和[!DNL hotfix]

解壓縮檔案，並參閱我們的支援知識庫中的[如何套用Adobe](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html)提供的撰寫器修補程式，以取得指示。

## 僅適用於Adobe Commerce on Cloud商家 — 如何判斷已套用隔離的修補程式

考慮到無法輕易檢查問題是否已修補，您可能想要檢查[!DNL VULN-27015]隔離的修補程式是否已成功套用。

<u>您可以執行下列步驟，以檔案`VULN-27015-2.4.7_COMPOSER.patch`為例</u>：

1. [安裝品質修補工具](https://experienceleague.adobe.com/docs/commerce-operations/tools/quality-patches-tool/usage.html)。
1. 執行命令： <br>
   ![cve-2024-34102-tell-if-patch-applied-code](assets/cve-2024-34102-tell-if-patch-applied-code.png)

<!--
    ```bash
    vendor/bin/magento-patches -n status |grep "27015\|Status"
    ```
-->

1. 您應該會看到類似以下的輸出，其中VULN-27015傳回&#x200B;*已套用*&#x200B;狀態：

   ```bash
   ║ Id            │ Title                                                        │ Category        │ Origin                 │ Status      │ Details                                          ║ ║ N/A           │ ../m2-hotfixes/VULN-27015-2.4.7_COMPOSER_patch.patch      │ Other           │ Local                  │ Applied     │ Patch type: Custom                                
   ```

## 套用修補程式後旋轉/變更[!UICONTROL encryption key]

如需在套用修補程式後如何輪換/變更[!UICONTROL encryption key]的指引&#x200B;**，請參閱Commerce管理系統指南檔案中的[管理系統指南： [!UICONTROL Encryption key]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)**。

## 有關保護存放區和旋轉加密金鑰的其他指導

如需有關[!DNL CVE-2024-34102]保護存放區及旋轉加密金鑰的其他指引，請參閱[保護存放區及旋轉加密金鑰的指引：  [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/guidance-on-securing-your-store-and-rotating-encryptionkeys-cve-2024-34102.md)，同樣位於Adobe Commerce知識庫。

## 安全性更新

Adobe Commerce可用的安全性更新：

* [疑難排解加密金鑰輪替： [!DNL CVE-2024-34102]](https://experienceleague.adobe.com/en/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/troubleshooting-encryption-key-rotation-cve-2024-34102)
* [Adobe安全性公告([!DNL APSB24-40])](https://helpx.adobe.com/security/products/magento/apsb24-40.html)

## 相關閱讀

在Adobe Commerce安裝指南中[啟用或停用[!UICONTROL maintenance mode]](https://experienceleague.adobe.com/en/docs/commerce-operations/installation-guide/tutorials/maintenance-mode)